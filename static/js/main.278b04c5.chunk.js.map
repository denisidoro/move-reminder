{"version":3,"sources":["logic/array.js","structures/hierarchy-map.js","logic/one-parser.js","logic/string.ts","logic/db.ts","hooks/context.ts","logic/bulk-parser.js","util/assets.ts","widgets/tree-chart/d3.ts","widgets/tree-chart/index.tsx","logic/style.ts","logic/adapter.ts","widgets/mind-map.tsx","widgets/particles-background.tsx","widgets/main-view.tsx","widgets/history.tsx","widgets/nav-bar.tsx","App.tsx","logic/url.js","bootstrap/reportWebVitals.ts","index.tsx"],"names":["dedupeFromRight","arr","invArr","reverse","forEach","x","includes","push","_dfs","pattern","matchPredicate","path","m","Object","keys","c","fullPath","res","_walk","f","entries","map","name","m2","children","HierarchyMap","this","xs","v","whitespaceRegex","parse","txt","hm","parents","split","line","id","trim","length","depth","match","countTabs","slice","fullId","add","normalize","replace","toLowerCase","matchesNormalized","subject","LINKS","HOME","NO_MATCHES","pathStrToVec","replaceAll","queryFunctionBuilder","maps","k","home","normalizedText","filter","p","parts","findByPath","matches","filePath","mapPath","dfs","nodeMatches","firstNode","array1","array2","every","value","index","external","MainContext","createContext","query","setQuery","setQueryBack","setQueryForward","history","setMaps","historyPos","initialState","useMainContext","useContext","stringToMap","text","filename","substring","join","createElement","tagName","props","attrs","el","document","key","setAttribute","fn","cache","memoize","url","head","append","rel","as","href","linkWidth","nodeData","data","Math","max","d","refreshPromises","Markmap","svg","opts","options","state","styleNode","g","zoom","viewHooks","bind","transformHtml","Hook","datum","d3","on","handleZoom","duration","nodeFont","nodeMinHeight","spacingVertical","spacingHorizontal","autoFit","fitRatio","color","node","l","paddingX","onClick","getId","attr","updateStyle","call","style","extraStyle","addClass","getStyleContent","e","transform","now","Date","lastClickMs","renderData","i","container","containerClass","className","textContent","body","walkTree","item","next","child","innerHTML","nodes","arrayFrom","childNodes","parent","rect","getBoundingClientRect","s","ceil","width","height","remove","assign","initializeData","setOptions","originData","layout","flextree","nodeSize","spacing","a","b","tree","hierarchy","ySizeInner","ySize","y","adjustSpacing","descendants","links","linkShape","minX","xSize","maxX","minY","maxY","fit","origin","find","x0","y0","selectAll","childSelector","nodeEnter","enter","handleClick","nodeExit","transition","exit","select","nodeMerge","merge","update","circle","handleClickCircle","foreignObject","fo","cloneNode","replaceWith","target","source","insert","sel","offsetWidth","offsetHeight","naturalWidth","naturalHeight","scale","min","initialZoom","translate","end","catch","noop","svgNode","halfWidth","halfHeight","newTransform","mm","setData","promises","callback","scheduled","callbackSoon","Promise","resolve","then","undefined","promise","indexOf","splice","onPromiseResolve","TreeChart","myRef","markmap","React","createRef","current","create","ref","Component","colorKeys","FALLBACK_COLOR","Colors","BLACK","getColor","j","styled","colorMain","newV","newNode","as_map","adapt","walk","Mindmap","queryFunction","useMemo","useCallback","fpsLimit","interactivity","detectsOn","events","enable","mode","onHover","resize","modes","bubble","distance","opacity","size","quantity","repulse","particles","collisions","move","direction","outMode","random","speed","straight","number","density","value_area","shape","type","detectRetina","ParticlesBackground","MainView","renderCurrentBreadcrumb","restProps","History","items","asItems","minVisibleItems","breadcrumbRenderer","TooltipButton","label","disabled","content","position","Position","RIGHT","searchButton","icon","minimal","Search","rightElement","Classes","MINIMAL","onChange","searchWikipediaClick","window","open","searchGoogleImagesClick","searchFarlexClick","worlframClick","helpClick","TopBar","fixedToTop","background","LeftBar","searchDisabled","backDisabled","forwardDisabled","goHome","paddingTop","paddingBottom","left","top","borderRadius","zIndex","vertical","downloadMindmaps","location","searchParams","URLSearchParams","getParams","search","catchCallback","error","escapedUrl","errorMaps","fetch","response","App","useState","q","slicedHistory","newHistoryPos","useValue","useEffect","Provider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","console","clear","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.278b04c5.chunk.js","sourcesContent":["export function equal(array1, array2) {\n  return (\n    array1.length === array2.length &&\n    array1.every((value, index) => value === array2[index])\n  )\n}\n\nexport function dedupeFromRight(arr) {\n  const invArr = []\n  arr.reverse().forEach(x => {\n    if (!invArr.includes(x)) {\n      invArr.push(x)\n    }\n  })\n  return invArr.reverse()\n}","function _dfs (pattern, matchPredicate, path, m) {\n  for (const c of Object.keys(m)) {\n    const fullPath = [...path, c]\n    if (matchPredicate(c, pattern)) {\n      return fullPath\n    }\n    const res = _dfs(pattern, matchPredicate, fullPath, m[c])\n    if (res) {\n      return res\n    }\n  }\n  return null\n}\n\nfunction _walk (f, m) {\n  return Object.entries(m).map(([name, m2]) => {\n    const children = _walk(f, m2)\n    return f(name, children)\n  })\n}\n\nexport class HierarchyMap {\n  constructor () {\n    this.m = {}\n  }\n\n  add (xs) {\n    let v = this.m\n    xs.forEach((x) => {\n      if (v[x] == null) {\n        v[x] = {}\n      }\n      v = v[x]\n    })\n    return v\n  }\n\n  dfs (pattern, matchPredicate) {\n    return _dfs(pattern, matchPredicate, [], this.m)\n  }\n\n  walk (f) {\n    return _walk(f, this.m)\n  }\n}\n","import { HierarchyMap } from '../structures/hierarchy-map'\n\nfunction countTabs(line) {\n  return line.match(whitespaceRegex)[0].length / 2\n}\n\nconst whitespaceRegex = /^\\s*/\n\nexport function parse(txt) {\n  const hm = new HierarchyMap()\n  let parents = []\n  txt.split('\\n').forEach((line) => {\n    const id = line.trim()\n    if (id.length > 0) {\n      const depth = countTabs(line)\n      parents = parents.slice(0, depth)\n      const fullId = [...parents, id]\n      hm.add(fullId)\n      parents[depth] = id\n    }\n  })\n  return hm\n}\n","export function normalize(txt) {\n  return txt.normalize('NFD')\n    .replace(/[\\u0300-\\u036f]/g, '')\n    .toLowerCase()\n}\n\nexport function matchesNormalized(subject, pattern) {\n  return normalize(subject).includes(pattern)\n}\n","import { equal as arraysEqual } from './array'\nimport { parse } from './one-parser'\nimport { HierarchyMap } from '../structures/hierarchy-map'\nimport { normalize, matchesNormalized } from './string'\n\nexport const LINKS = 'links'\nexport const HOME = ''\nexport const NO_MATCHES = 'no matches'\n\nfunction pathStrToVec(path) {\n  return path.replaceAll('\\\\/', '˞')\n    .split('/')\n    .map(x => x.replaceAll('˞', '/'))\n}\n\nfunction external(path, match) {\n  const x = match.slice(0, path.length)\n  return !arraysEqual(x, path)\n}\n\nexport function queryFunctionBuilder(maps) {\n  function fileMatches(pattern) {\n    return Object.keys(maps)\n      .filter((path) => matchesNormalized(path, pattern))\n      .map(pathStrToVec)\n  }\n\n  function nodeMatches(pattern) {\n    const matches = []\n    Object.entries(maps).forEach(([path, txt]) => {\n      if (matchesNormalized(txt, pattern)) {\n        const filePath = pathStrToVec(path)\n        const parsed = parse(txt)\n        const mapPath = parsed.dfs(pattern, matchesNormalized) || []\n        matches.push([...filePath, ...mapPath])\n      }\n    })\n    return matches\n  }\n\n  function findByPath(txt) {\n    return Object.keys(maps).filter((p) => {\n      if (matchesNormalized(p, txt)) {\n        const parts = pathStrToVec(p)\n        const lastPart = parts[parts.length - 1]\n        if (normalize(lastPart.trim()) == txt) {\n          return true\n        }\n      }\n      return false\n    })[0]\n  }\n\n  function home() {\n    const hm = new HierarchyMap()\n    Object.keys(maps).forEach(k => {\n      hm.add(pathStrToVec(k))\n    })\n    return hm\n  }\n\n  function query(txt): HierarchyMap {\n    if (txt == HOME) {\n      return home()\n    }\n    const normalizedText = normalize(txt).trim()\n    const path = findByPath(normalizedText)\n    const hm = path ? parse(maps[path]) : new HierarchyMap()\n    const isExternal = (m) => {\n      return !path || external(pathStrToVec(path), m)\n    }\n    const matches = [...fileMatches(normalizedText), ...nodeMatches(normalizedText)]\n    const firstNode = Object.keys(hm.m)[0]\n    matches\n      .filter(isExternal)\n      .forEach((m) => hm.add(path ? [firstNode, LINKS, ...m] : m))\n    return hm\n  }\n\n  return query\n}\n\nexport function isInternalCommand(txt: string): boolean {\n  return txt == LINKS || txt == HOME || txt == NO_MATCHES\n}\n","import React, { createContext, useContext, useState, useCallback } from 'react'\nimport { HOME } from '../logic/db'\nimport { dedupeFromRight } from '../logic/array'\n\nexport const MainContext = createContext({\n    query: null,\n    setQuery: null,\n    setQueryBack: null,\n    setQueryForward: null,\n    maps: null,\n    history: null,\n    setMaps: null,\n    historyPos: 0,\n})\n\nconst initialState = { query: HOME, history: [HOME], historyPos: 0 }\n\nexport function useValue() {\n    const [data, setData] = useState(initialState)\n    const [maps, setMaps] = useState(null)\n\n    const setQuery = useCallback(\n        (q) => {\n            setData(data => {\n                if (q == HOME) {\n                    return initialState\n                }\n                const slicedHistory = data.history.slice(0, data.history.length + data.historyPos)\n                return {\n                    query: q,\n                    history: dedupeFromRight([...slicedHistory, q]),\n                    historyPos: 0\n                }\n            })\n        },\n        [setData, data])\n\n    const setQueryBack = useCallback(\n        () => {\n            setData(data => {\n                const newHistoryPos = data.historyPos - 1\n                const q = data.history[data.history.length - 1 + newHistoryPos]\n                if (q == null) {\n                    return initialState\n                } else {\n                    return {\n                        ...data,\n                        query: q,\n                        historyPos: newHistoryPos\n                    }\n                }\n            })\n        },\n        [setData, data])\n\n    const setQueryForward = useCallback(\n        () => {\n            setData(data => {\n                const newHistoryPos = data.historyPos + 1\n                const q = data.history[data.history.length - 1 + newHistoryPos]\n                if (q == null) {\n                    return data\n                } else {\n                    return {\n                        ...data,\n                        query: q,\n                        historyPos: newHistoryPos\n                    }\n                }\n            })\n        },\n        [setData, data])\n\n    return {\n        query: data.query,\n        setQuery,\n        setQueryBack,\n        setQueryForward,\n        history: data.history,\n        maps,\n        setMaps,\n        historyPos: data.historyPos\n    }\n}\n\nexport const useMainContext = () => useContext(MainContext)\n","export function stringToMap(text) {\n  const m = {}\n  let filename = ''\n\n  if (text.length > 0) {\n    text.split('\\n').forEach(line => {\n      if (line[0] === '>') {\n        filename = line.substring(2)\n        m[filename] = []\n      } else if (filename.length > 0) {\n        m[filename].push(line)\n      }\n    })\n  }\n\n  const m2 = {}\n  Object.entries(m).forEach(([k, v]) => {\n    m2[k] = v.join('\\n')\n  })\n\n  return m2\n}\n","import { JSItem, JSScriptItem, CSSItem } from 'markmap-common'\n\nexport function memoize<T extends (...args: any[]) => any> (fn: T): T {\n  const cache = {}\n  return function memoized (...args: any[]): T {\n    const key = `${args[0]}`\n    let data = cache[key]\n    if (!data) {\n      data = {\n        value: fn(...args)\n      }\n      cache[key] = data\n    }\n    return data.value\n  } as T\n}\n\nfunction createElement (\n  tagName: string,\n  props?: any,\n  attrs?: { [key: string]: string }\n): HTMLElement {\n  const el = document.createElement(tagName)\n  if (props) {\n    Object.entries(props).forEach(([key, value]) => {\n      el[key] = value\n    })\n  }\n  if (attrs) {\n    Object.entries(attrs).forEach(([key, value]) => {\n      el.setAttribute(key, value)\n    })\n  }\n  return el\n}\n\nconst memoizedPreloadJS = memoize((url: string) => {\n  document.head.append(createElement('link', {\n    rel: 'preload',\n    as: 'script',\n    href: url\n  }))\n})\n\nfunction loadJSItem (item: JSItem, context: any): Promise<any> {\n  if (item.type === 'script') {\n    return new Promise((resolve, reject) => {\n      document.head.append(createElement('script', {\n        ...item.data,\n        onload: resolve,\n        onerror: reject\n      }))\n    })\n  }\n  if (item.type === 'iife') {\n    const { fn, getParams } = item.data\n    fn(...getParams?.(context) || [])\n  }\n}\n\nfunction loadCSSItem (item: CSSItem): void {\n  if (item.type === 'style') {\n    document.head.append(createElement('style', {\n      textContent: item.data\n    }))\n  } else if (item.type === 'stylesheet') {\n    document.head.append(createElement('link', {\n      rel: 'stylesheet',\n      ...item.data\n    }))\n  }\n}\n\nexport async function loadJS (items: JSItem[], context: any): Promise<void> {\n  const needPreload = items.filter(item => item.type === 'script') as JSScriptItem[]\n  if (needPreload.length > 1) needPreload.forEach(item => memoizedPreloadJS(item.data.src))\n  context = {\n    getMarkmap: () => (window as any).markmap,\n    ...context\n  }\n  for (const item of items) {\n    await loadJSItem(item, context)\n  }\n}\n\nexport function loadCSS (items: CSSItem[]): void {\n  for (const item of items) {\n    loadCSSItem(item)\n  }\n}\n","// This is based on\n// https://github.com/gera2ld/markmap/blob/e6b035840124702208255f4d2a561f297a922319/packages/markmap-view/src/index.ts\n\nimport * as d3 from 'd3'\nimport { flextree } from 'd3-flextree'\nimport { Hook, getId, walkTree, arrayFrom, addClass, childSelector, noop } from 'markmap-common'\nimport { IMarkmapOptions, IMarkmapState, IMarkmapFlexTreeItem, IMarkmapLinkItem, INode } from '../../types'\nexport { loadJS, loadCSS } from '../../util/assets'\n\nfunction linkWidth(nodeData: IMarkmapFlexTreeItem): number {\n  const data: INode = nodeData.data\n  return Math.max(6 - 2 * data.d, 1.5)\n}\n\nfunction adjustSpacing(tree: IMarkmapFlexTreeItem, spacing: number): void {\n  walkTree(tree, (d, next) => {\n    d.ySizeInner = d.ySize - spacing\n    d.y += spacing\n    next()\n  }, 'children')\n}\n\ntype ID3SVGElement = d3.Selection<\n  SVGElement,\n  IMarkmapFlexTreeItem,\n  HTMLElement,\n  IMarkmapFlexTreeItem\n>\n\nfunction createViewHooks() {\n  return {\n    transformHtml: new Hook<(mm: Markmap, nodes: HTMLElement[]) => void>()\n  }\n}\n\nconst refreshPromises: Array<Promise<any>> = []\n\nexport function registerRefreshPromise(promise: Promise<any>) {\n  refreshPromises.push(promise)\n}\n\nfunction onPromiseResolve(promises: Array<Promise<any>>, callback: () => void) {\n  let scheduled: Promise<any> | void\n  const callbackSoon = () => {\n    if (!scheduled) {\n      scheduled = Promise.resolve().then(() => {\n        scheduled = undefined\n        callback()\n      }).catch(noop)\n    }\n  }\n  promises.forEach(promise => {\n    promise\n      .then(callbackSoon, noop)\n      .then(() => {\n        // No need to wait for the promise in the future\n        const i = promises.indexOf(promise)\n        if (i >= 0) promises.splice(i, 1)\n      })\n  })\n}\n\nexport class Markmap {\n  options: IMarkmapOptions\n\n  state: IMarkmapState\n\n  svg: ID3SVGElement\n\n  styleNode: d3.Selection<\n    HTMLStyleElement,\n    IMarkmapFlexTreeItem,\n    HTMLElement,\n    IMarkmapFlexTreeItem\n  >\n\n  g: d3.Selection<SVGGElement, IMarkmapFlexTreeItem, HTMLElement, IMarkmapFlexTreeItem>\n\n  zoom: d3.ZoomBehavior<Element, unknown>\n\n  viewHooks: ReturnType<typeof createViewHooks>\n\n  constructor(svg: string | SVGElement | ID3SVGElement, opts?: IMarkmapOptions) {\n    [\n      'handleZoom',\n      'handleClick',\n      'handleClickCircle'\n    ].forEach(key => {\n      this[key] = this[key].bind(this)\n    })\n    this.viewHooks = createViewHooks()\n    this.svg = (svg as ID3SVGElement).datum ? (svg as ID3SVGElement) : d3.select(svg as string)\n    this.styleNode = this.svg.append('style')\n    this.zoom = d3.zoom().on('zoom', this.handleZoom)\n    this.options = {\n      duration: 500,\n      nodeFont: '300 16px/20px sans-serif',\n      nodeMinHeight: 16,\n      spacingVertical: 5,\n      spacingHorizontal: 80,\n      autoFit: true,\n      fitRatio: 0.95,\n      // color: (colorFn => (node: INode): string => colorFn(node.p.i))(\n      //   d3.scaleOrdinal(d3.schemeCategory10),\n      // ),\n      color: (node: INode) => { return node.l || 'blue' },\n      paddingX: 8,\n      onClick: (node: INode) => { },\n      ...opts\n    }\n    this.state = {\n      id: this.options.id || getId()\n    }\n    this.g = this.svg.append('g').attr('class', `${this.state.id}-g`)\n    this.updateStyle()\n    this.svg.call(this.zoom)\n  }\n\n  getStyleContent(): string {\n    const { style, nodeFont } = this.options\n    const { id } = this.state\n    const extraStyle = typeof style === 'function' ? style(id) : ''\n    const styleText = `\\\n.${id} { color: #fffafa; }\n.${id} a { color: #0097e6; }\n.${id} a:hover { color: #00a8ff; }\n.${id}-g > path { fill: none; }\n.${id}-fo > div { display: inline-block; font: ${nodeFont}; white-space: nowrap; }\n.${id}-fo code { padding: .2em .4em; font-size: calc(1em - 2px); color: #555; background-color: #f0f0f0; border-radius: 2px; }\n.${id}-fo del { text-decoration: line-through; }\n.${id}-fo em { font-style: italic; }\n.${id}-fo strong { font-weight: bolder; }\n.${id}-fo pre { margin: 0; }\n.${id}-fo pre[class*=language-] { padding: 0; }\n.${id}-g > g { cursor: pointer; }\n${extraStyle}\n`\n    return styleText\n  }\n\n  updateStyle(): void {\n    this.svg.attr('class', addClass(this.svg.attr('class'), this.state.id))\n    this.styleNode.text(this.getStyleContent())\n  }\n\n  handleZoom(e): void {\n    const { transform } = e\n    this.g.attr('transform', transform)\n  }\n\n  handleClick(e, d: IMarkmapFlexTreeItem): void {\n    const now = Date.now()\n    if (this.state.lastClickMs != null && now - this.state.lastClickMs <= 500) {\n      return\n    }\n    const { data } = d\n    this.options.onClick(data)\n  }\n\n  handleClickCircle(e, d: IMarkmapFlexTreeItem): void {\n    this.state.lastClickMs = Date.now()\n    const { data } = d\n    data.p = {\n      ...data.p,\n      f: !data.p?.f\n    }\n    this.renderData(d.data)\n  }\n\n  initializeData(node: INode): void {\n    let i = 0\n    const { nodeFont, color, nodeMinHeight } = this.options\n    const { id } = this.state\n    const container = document.createElement('div')\n    const containerClass = `${id}-container`\n    container.className = addClass(\n      container.className,\n      `${id}-fo`,\n      containerClass\n    )\n    const style = document.createElement('style')\n    style.textContent = `\n${this.getStyleContent()}\n.${containerClass} {\n  position: absolute;\n  width: 0;\n  height: 0;\n  top: -100px;\n  left: -100px;\n  overflow: hidden;\n  font: ${nodeFont};\n}\n.${containerClass} > div {\n  display: inline-block;\n}\n`\n    document.body.append(style, container)\n    walkTree(node, (item, next) => {\n      item.c = item.c?.map(child => ({ ...child }))\n      i += 1\n      const el = document.createElement('div')\n      el.innerHTML = item.v\n      container.append(el)\n      item.p = {\n        ...item.p,\n        // unique ID\n        i,\n        el\n      }\n      color(item) // preload colors\n      next()\n    })\n    const nodes = arrayFrom(container.childNodes) as HTMLElement[]\n    this.viewHooks.transformHtml.call(this, nodes)\n    walkTree(node, (item, next, parent) => {\n      const rect = item.p.el.getBoundingClientRect()\n      item.v = item.p.el.innerHTML\n      item.p.s = [Math.ceil(rect.width), Math.max(Math.ceil(rect.height), nodeMinHeight)]\n      // TODO keep keys for unchanged objects\n      // unique key, should be based on content\n      item.p.k = `${parent?.p?.i || ''}.${item.p.i}:${item.v}`\n      next()\n    })\n    container.remove()\n    style.remove()\n  }\n\n  setOptions(opts: IMarkmapOptions): void {\n    Object.assign(this.options, opts)\n  }\n\n  setData(data?: INode, opts?: IMarkmapOptions): void {\n    if (!data) data = { ...this.state.data }\n    this.state.data = data\n    this.initializeData(data)\n    if (opts) this.setOptions(opts)\n    this.renderData()\n  }\n\n  renderData(originData?: INode): void {\n    if (!this.state.data) return\n    const { spacingHorizontal, paddingX, spacingVertical, autoFit, color } = this.options\n    const { id } = this.state\n    const layout = flextree()\n      .children((d: INode) => !d.p?.f && d.c)\n      .nodeSize((d: IMarkmapFlexTreeItem) => {\n        const [width, height] = d.data.p.s\n        return [height, width + (width ? paddingX * 2 : 0) + spacingHorizontal]\n      })\n      .spacing((a: IMarkmapFlexTreeItem, b: IMarkmapFlexTreeItem) => {\n        return a.parent === b.parent ? spacingVertical : spacingVertical * 2\n      })\n    const tree = layout.hierarchy(this.state.data)\n    layout(tree)\n    adjustSpacing(tree, spacingHorizontal)\n    const descendants: IMarkmapFlexTreeItem[] = tree.descendants().reverse()\n    const links: IMarkmapLinkItem[] = tree.links()\n    const linkShape = d3.linkHorizontal()\n    const minX = d3.min<any, number>(descendants, d => d.x - d.xSize / 2)\n    const maxX = d3.max<any, number>(descendants, d => d.x + d.xSize / 2)\n    const minY = d3.min<any, number>(descendants, d => d.y)\n    const maxY = d3.max<any, number>(descendants, d => d.y + d.ySizeInner)\n    Object.assign(this.state, {\n      minX,\n      maxX,\n      minY,\n      maxY\n    })\n\n    if (autoFit) this.fit()\n\n    const origin = originData && descendants.find(item => item.data === originData) || tree\n    const x0 = origin.data.p.x0 ?? origin.x\n    const y0 = origin.data.p.y0 ?? origin.y\n\n    // Update the nodes\n    const node = this.g.selectAll<SVGGElement, IMarkmapFlexTreeItem>(childSelector<SVGGElement>('g'))\n      .data(descendants, d => d.data.p.k)\n    const nodeEnter = node.enter().append('g')\n      .attr('transform', d => `translate(${y0 + origin.ySizeInner - d.ySizeInner},${x0 + origin.xSize / 2 - d.xSize})`)\n      .on('click', this.handleClick)\n\n    const nodeExit = this.transition(node.exit<IMarkmapFlexTreeItem>())\n    nodeExit.select('rect').attr('width', 0).attr('x', d => d.ySizeInner)\n    nodeExit.select('foreignObject').style('opacity', 0)\n    nodeExit.attr('transform', d => `translate(${origin.y + origin.ySizeInner - d.ySizeInner},${origin.x + origin.xSize / 2 - d.xSize})`).remove()\n\n    const nodeMerge = node.merge(nodeEnter)\n    this.transition(nodeMerge).attr('transform', d => `translate(${d.y},${d.x - d.xSize / 2})`)\n\n    const rect = nodeMerge.selectAll<SVGRectElement, IMarkmapFlexTreeItem>(childSelector<SVGRectElement>('rect'))\n      .data(d => [d], d => d.data.p.k)\n      .join(\n        enter => {\n          return enter.append('rect')\n            .attr('x', d => d.ySizeInner)\n            .attr('y', d => d.xSize - linkWidth(d) / 2)\n            .attr('width', 0)\n            .attr('height', linkWidth)\n        },\n        update => update,\n        exit => exit.remove()\n      )\n    this.transition(rect)\n      .attr('x', -1)\n      .attr('width', d => d.ySizeInner + 2)\n      .attr('fill', d => color(d.data))\n\n    const circle = nodeMerge.selectAll<SVGCircleElement, IMarkmapFlexTreeItem>(childSelector<SVGCircleElement>('circle'))\n      .data(d => (d.data.c ? [d] : []), d => d.data.p.k)\n      .join(\n        enter => {\n          return enter.append('circle')\n            .attr('stroke-width', '1.5')\n            .attr('cx', d => d.ySizeInner)\n            .attr('cy', d => d.xSize)\n            .attr('r', 0)\n            .on('click', this.handleClickCircle)\n        },\n        update => update,\n        exit => exit.remove()\n      )\n    this.transition(circle)\n      .attr('r', 6)\n      .attr('stroke', d => color(d.data))\n      .attr('fill', d => (d.data.p?.f && d.data.c ? color(d.data) : '#fff'))\n\n    const foreignObject = nodeMerge.selectAll<SVGForeignObjectElement, IMarkmapFlexTreeItem>(childSelector<SVGForeignObjectElement>('foreignObject'))\n      .data(d => [d], d => d.data.p.k)\n      .join(\n        enter => {\n          const fo = enter.append('foreignObject')\n            .attr('class', `${id}-fo`)\n            .attr('x', paddingX)\n            .attr('y', 0)\n            .style('opacity', 0)\n            .attr('height', d => d.xSize)\n\n          fo.append('xhtml:div')\n            .select(function select(d) {\n              const node = d.data.p.el.cloneNode(true)\n              this.replaceWith(node)\n              return node\n            })\n            .attr('xmlns', 'http://www.w3.org/1999/xhtml')\n\n          return fo\n        },\n        update => update,\n        exit => exit.remove()\n      )\n      .attr('width', d => Math.max(0, d.ySizeInner - paddingX * 2))\n    this.transition(foreignObject)\n      .style('opacity', 1)\n\n    // Update the links\n    const path = this.g.selectAll<SVGPathElement, IMarkmapLinkItem>(childSelector<SVGPathElement>('path'))\n      .data(links, d => d.target.data.p.k)\n      .join(\n        enter => {\n          const source: [number, number] = [\n            y0 + origin.ySizeInner,\n            x0 + origin.xSize / 2\n          ]\n          return enter.insert('path', 'g')\n            .attr('d', linkShape({ source, target: source }))\n        },\n        update => update,\n        exit => {\n          const source: [number, number] = [\n            origin.y + origin.ySizeInner,\n            origin.x + origin.xSize / 2\n          ]\n          return this.transition(exit)\n            .attr('d', linkShape({ source, target: source }))\n            .remove()\n        }\n      )\n    this.transition(path)\n      .attr('stroke', d => color(d.target.data))\n      .attr('stroke-width', d => linkWidth(d.target))\n      .attr('d', d => {\n        const source: [number, number] = [\n          d.source.y + d.source.ySizeInner,\n          d.source.x + d.source.xSize / 2\n        ]\n        const target: [number, number] = [\n          d.target.y,\n          d.target.x + d.target.xSize / 2\n        ]\n        return linkShape({ source, target })\n      })\n\n    descendants.forEach(d => {\n      d.data.p.x0 = d.x\n      d.data.p.y0 = d.y\n    })\n  }\n\n  transition<T extends d3.BaseType, U, P extends d3.BaseType, Q>(\n    sel: d3.Selection<T, U, P, Q>\n  ): d3.Transition<T, U, P, Q> {\n    const { duration } = this.options\n    return sel.transition().duration(duration)\n  }\n\n  fit(): Promise<void> {\n    const svgNode = this.svg.node()\n    const { width: offsetWidth, height: offsetHeight } = svgNode.getBoundingClientRect()\n    const { fitRatio } = this.options\n    const { minX, maxX, minY, maxY } = this.state\n    const naturalWidth = maxY - minY\n    const naturalHeight = maxX - minX\n    const scale = Math.min(\n      offsetWidth / naturalWidth * fitRatio,\n      offsetHeight / naturalHeight * fitRatio,\n      2\n    )\n    const initialZoom = d3.zoomIdentity\n      .translate(\n        (offsetWidth - naturalWidth * scale) / 2 - minY * scale,\n        (offsetHeight - naturalHeight * scale) / 2 - minX * scale\n      )\n      .scale(scale)\n    return this.transition(this.svg).call(this.zoom.transform, initialZoom).end().catch(noop)\n  }\n\n  rescale(scale: number): Promise<void> {\n    const svgNode = this.svg.node()\n    const { width: offsetWidth, height: offsetHeight } = svgNode.getBoundingClientRect()\n    const halfWidth = offsetWidth / 2\n    const halfHeight = offsetHeight / 2\n    const transform = d3.zoomTransform(svgNode)\n    const newTransform = transform\n      .translate(\n        (halfWidth - transform.x) * (1 - scale) / transform.k,\n        (halfHeight - transform.y) * (1 - scale) / transform.k\n      )\n      .scale(scale)\n    return this.transition(this.svg).call(this.zoom.transform, newTransform).end().catch(noop)\n  }\n\n  static create(\n    svg: string | SVGElement | ID3SVGElement,\n    opts?: IMarkmapOptions,\n    data?: INode\n  ): Markmap {\n    const mm = new Markmap(svg, opts)\n    if (data) {\n      mm.setData(data)\n      mm.fit() // always fit for the first render\n    }\n    onPromiseResolve(refreshPromises, () => {\n      mm.setData()\n    })\n    return mm\n  }\n}\n","import React from 'react'\nimport { Markmap } from './d3'\n\ninterface PropsType {\n  data: any\n  onClick: any\n}\n\nclass TreeChart extends React.Component<PropsType, {}> {\n  myRef: any\n  markmap: Markmap\n\n  constructor(props) {\n    super(props)\n    this.myRef = React.createRef()\n  }\n\n  componentDidMount() {\n    const el = this.myRef.current\n    const data = this.props.data\n    this.markmap = Markmap.create(el, { onClick: this.props.onClick }, data)\n  }\n\n  componentDidUpdate() {\n    const data = this.props.data\n    this.markmap.setData(data)\n  }\n\n  componentWillUnmount() {\n    // this.markmap.svg.remove()\n  }\n\n  render() {\n    return <svg style={{ height: '100%', width: '100%' }} ref={this.myRef} />\n  }\n}\n\nexport default TreeChart\n","import { Colors } from '@blueprintjs/core'\n\nconst colorKeys = [\n  'BLUE',\n  'GREEN',\n  'ORANGE',\n  'RED',\n  'COBALT',\n  'FOREST',\n  'GOLD',\n  'INDIGO',\n  'LIME',\n  'ROSE',\n  'SEPIA',\n  'TURQUOISE',\n  'VERMILION',\n  'VIOLET'\n]\n\nexport const FALLBACK_COLOR = Colors.BLACK\n\nexport function getColor (i: number, j: number) {\n  var key = colorKeys[i % (colorKeys.length)]\n  const k = j < 4 ? 5 - j : 1\n  key = `${key}${k}`\n  return Colors[key] || FALLBACK_COLOR\n}\n","import { INode } from '../types'\nimport { getColor, FALLBACK_COLOR } from './style'\nimport { HierarchyMap } from '../structures/hierarchy-map'\nimport { LINKS, NO_MATCHES } from '../logic/db'\n\nexport function styled(node: INode, depth: number = 0, colorMain?: number): INode {\n  const { v, c } = node\n  const l = depth > 0 ? getColor(colorMain, depth - 1) : FALLBACK_COLOR\n  const newV = v == '.' ? '' : v\n  const newNode = { ...node, c: null, v: newV, d: depth, l } as INode\n  if (newV == LINKS || depth > 1) {\n    newNode.p = { ...newNode.p, f: true }\n  }\n  if (c && c.length > 0) {\n    newNode.c = c.map((child, i) => styled(child, depth + 1, colorMain == null ? i : colorMain))\n  }\n  return newNode\n}\n\nfunction as_map(name, children) {\n  return { v: name, c: children }\n}\n\nexport function adapt(hm: HierarchyMap, query: String): INode {\n  var data = hm.walk(as_map)\n  const l = data.length\n  switch (data.length) {\n    case 0:\n      data = { v: query, c: [{ v: NO_MATCHES }] }\n      break\n    case 1:\n      data = data[0]\n      break\n    default:\n      data = { ...data[0], v: query, c: data }\n  }\n  return styled(data)\n}\n","import React, { useMemo, useCallback } from 'react'\nimport TreeChart from './tree-chart'\nimport { isInternalCommand, queryFunctionBuilder } from '../logic/db'\nimport { useMainContext } from '../hooks/context'\nimport { adapt } from '../logic/adapter'\nimport { INode } from '../types'\n\nconst Mindmap = () => {\n  const { query, setQuery, maps } = useMainContext()\n\n  const queryFunction = useMemo(\n    () => maps == null ? null : queryFunctionBuilder(maps),\n    [maps])\n\n  const data = useMemo(\n    () => queryFunction == null ? null : adapt(queryFunction(query), query),\n    [queryFunction, query])\n\n  const onClick = useCallback(\n    ({ v }: INode) => {\n      if (isInternalCommand(v)) {\n        return\n      }\n      setQuery(`${v}`)\n    },\n    [setQuery])\n\n  return <TreeChart\n    data={data}\n    onClick={onClick} />\n}\n\nexport default Mindmap\n","import React from 'react'\nimport Particles from 'react-tsparticles'\n\nconst options = {\n  fpsLimit: 60,\n  interactivity: {\n    detectsOn: 'canvas',\n    events: {\n      onClick: {\n        enable: true,\n        mode: 'push'\n      },\n      onHover: {\n        enable: true,\n        mode: 'repulse'\n      },\n      resize: true\n    },\n    modes: {\n      bubble: {\n        distance: 400,\n        duration: 2,\n        opacity: 0.8,\n        size: 40\n      },\n      push: {\n        quantity: 4\n      },\n      repulse: {\n        distance: 200,\n        duration: 0.4\n      }\n    }\n  },\n  particles: {\n    color: {\n      value: '#ffffff'\n    },\n    links: {\n      color: '#ffffff',\n      distance: 150,\n      enable: true,\n      opacity: 0.3,\n      width: 1\n    },\n    collisions: {\n      enable: false\n    },\n    move: {\n      direction: 'none',\n      enable: true,\n      outMode: 'bounce',\n      random: false,\n      speed: 3,\n      straight: false\n    },\n    number: {\n      density: {\n        enable: true,\n        value_area: 1200\n      },\n      value: 80\n    },\n    opacity: {\n      value: 0.5\n    },\n    shape: {\n      type: 'circle'\n    },\n    size: {\n      random: true,\n      value: 3\n    }\n  },\n  detectRetina: true\n}\n\nexport const ParticlesBackground = () => {\n  return (\n    <Particles\n      className='tsparticles background'\n      options={options}\n    />\n  )\n}\n","import React from 'react'\nimport Mindmap from './mind-map'\nimport { ParticlesBackground } from './particles-background'\n\nexport const MainView = () => {\n  return (\n    <div id='main-view'>\n      <div className='content'>\n        <Mindmap />\n      </div>\n      <ParticlesBackground />\n    </div>\n  )\n}\n","import React, { createContext, useContext, useState, useCallback } from 'react'\nimport { Breadcrumb, Breadcrumbs, IBreadcrumbProps, Icon } from '@blueprintjs/core'\nimport { useMainContext } from '../hooks/context'\nimport { HOME } from '../logic/db'\n\nfunction asItems(history, setQuery): IBreadcrumbProps[] {\n    return history.map(item => {\n        const text = item == HOME ? 'Home' : item\n        return {\n            onClick: () => { setQuery(item) },\n            text\n        }\n    })\n}\n\nconst renderCurrentBreadcrumb = ({ text, ...restProps }: IBreadcrumbProps) => {\n    return <Breadcrumb className='breadcrumb' {...restProps}><small>{text}</small></Breadcrumb>;\n};\n\nexport function History() {\n    const { history, historyPos, setQuery } = useMainContext()\n\n    if (history.length <= 1) {\n        return null\n    }\n\n    const slicedHistory = history.slice(0, history.length + historyPos)\n    const items = asItems(slicedHistory, setQuery)\n\n    return (\n        <Breadcrumbs\n            minVisibleItems={2}\n            breadcrumbRenderer={renderCurrentBreadcrumb}\n            items={items}\n        />\n    )\n} ","import React, { useCallback, useState } from 'react'\nimport { useMainContext } from '../hooks/context'\nimport { HOME } from '../logic/db'\nimport { useDebouncedEffect } from '../hooks/debounce'\nimport { History } from './history'\nimport {\n  InputGroup,\n  Button,\n  Icon,\n  Navbar,\n  NavbarDivider,\n  Divider,\n  ButtonGroup,\n  NavbarGroup,\n  NavbarHeading,\n  Colors,\n  Position,\n  IButtonProps,\n  Tooltip,\n  Classes\n} from '@blueprintjs/core'\n\ninterface TooltipButtonProps extends IButtonProps {\n  label: string\n}\n\nconst TooltipButton = ({ label, ...restProps }: TooltipButtonProps) => {\n  return restProps.disabled\n    ? <Button {...restProps} />\n    : <Tooltip content={label} position={Position.RIGHT}>\n      <Button {...restProps} />\n    </Tooltip>\n}\n\nconst searchButton = (\n  <Button\n    icon='search'\n    minimal\n  />\n)\n\nconst Search = () => {\n  const { query, setQuery } = useMainContext()\n\n  // TODO: use debounced value\n  /*\n  const [state, setState] = useState(query)\n\n  useDebouncedEffect(\n    () => setQuery(state),\n    325,\n    [state])\n  */\n\n  return (\n    <InputGroup\n      rightElement={searchButton}\n      className={Classes.MINIMAL}\n      type='text'\n      value={query}\n      onChange={(v) => setQuery(v.target.value)}\n    />\n  )\n}\n\nconst searchWikipediaClick = (query) => () => {\n  window.open(`https://duckduckgo.com/?q=!+wikipedia+pt+en+${query}`)\n}\n\nconst searchGoogleImagesClick = (query) => () => {\n  window.open(`https://www.google.com.br/search?tbm=isch&hl=en&source=hp&biw=1024&bih=673&q=${query}&btnG=Search+Images&gbv=2&oq=&aq=&aqi=&aql=&gs_l=&gws_rd=ssl`)\n}\n\nconst searchFarlexClick = (query) => () => {\n  window.open(`https://duckduckgo.com/?q=!+thefreedictionary+${query}`)\n}\n\nconst worlframClick = (query) => () => {\n  window.open(`https://duckduckgo.com/?q=!wolf+${query}`)\n}\n\nconst helpClick = () => {\n  window.open('https://github.com/denisidoro/move-reminder')\n}\n\nexport const TopBar = () => {\n  return (\n    <Navbar fixedToTop style={{ background: Colors.BLACK }} >\n      <NavbarGroup className='bp3-dark' style={{ width: '100%' }}>\n        <NavbarHeading><Icon icon='graph' /></NavbarHeading>\n        <NavbarDivider />\n        <div style={{ width: '20%' }} >\n          <Search />\n        </div>\n        <NavbarDivider />\n        <div style={{ width: '40%' }}>\n          <History />\n        </div>\n      </NavbarGroup>\n    </Navbar>\n  )\n}\n\nexport const LeftBar = () => {\n  const { query, setQuery, setQueryBack, setQueryForward, history, historyPos } = useMainContext()\n\n  const searchDisabled = query == HOME\n  const backDisabled = history.length + historyPos <= 1\n  const forwardDisabled = history.length <= 1 || historyPos >= 0\n  const goHome = useCallback(() => setQuery(HOME), [setQuery])\n\n  return (\n    <ButtonGroup style={{ position: 'absolute', background: Colors.BLACK, paddingTop: '4em', paddingBottom: '0.5em', left: 0, top: 0, borderRadius: '0 0 2em 0', zIndex: 4, width: '3em' }} minimal vertical={true}>\n      <span className='button-group'>\n        <TooltipButton label=\"Home\" icon='home' onClick={goHome} />\n        <TooltipButton label=\"Undo\" icon='undo' disabled={backDisabled} onClick={setQueryBack} />\n        <TooltipButton label=\"Redo\" icon='redo' disabled={forwardDisabled} onClick={setQueryForward} />\n      </span>\n      <Divider />\n      <span className='button-group'>\n        <TooltipButton label=\"Wikipedia\" icon='globe' disabled={searchDisabled} onClick={searchWikipediaClick(query)} />\n        <TooltipButton label=\"Farlex Dictionary\" icon='book' disabled={searchDisabled} onClick={searchFarlexClick(query)} />\n        <TooltipButton label=\"Google Images\" icon='camera' disabled={searchDisabled} onClick={searchGoogleImagesClick(query)} />\n        <TooltipButton label=\"Wolfram Alpha\" icon='function' disabled={searchDisabled} onClick={worlframClick(query)} />\n      </span>\n      <Divider />\n      <TooltipButton label=\"Help\" icon='help' onClick={helpClick} />\n      <Divider />\n    </ButtonGroup>\n  )\n}","import './bootstrap/App.css'\nimport 'normalize.css'\nimport '@blueprintjs/core/lib/css/blueprint.css'\nimport '@blueprintjs/icons/lib/css/blueprint-icons.css'\n\nimport React, { useEffect } from 'react'\nimport { MainContext, useValue } from './hooks/context'\nimport { stringToMap } from './logic/bulk-parser'\nimport { MainView } from './widgets/main-view'\nimport { TopBar, LeftBar } from './widgets/nav-bar'\nimport { getParams, DEFAULT_MAPS_URL, errorMaps } from './logic/url'\n\n/*\nimport { IResizeEntry, ResizeSensor } from \"@blueprintjs/core\";\n\nconst onResize = (setIsVertical) => (entries: IResizeEntry[]) => {\n  if (entries.length == 0) {\n    setIsVertical(false)\n    return\n  }\n  const e = entries[0]\n  setIsVertical(e.contentRect.width < e.contentRect.height)\n}\n\nconst isInitiallyVertical = window.innerWidth < window.innerHeight\n*/\n\nconst downloadMindmaps = (setMaps) => {\n  const params = getParams(window.location.search)\n  const url = params.url || DEFAULT_MAPS_URL\n\n  const catchCallback = (error) => {\n    setMaps(stringToMap(errorMaps(url, error)))\n  }\n\n  fetch(url)\n    .then(response => response.text())\n    .catch(catchCallback)\n    .then(body => setMaps(stringToMap(body)))\n    .catch(catchCallback)\n}\n\nfunction App() {\n  const value = useValue()\n\n  // TODO: use isVertical\n  // const [isVertical, setIsVertical] = useState(isInitiallyVertical) \n\n  useEffect(() => downloadMindmaps(value.setMaps), [])\n\n  return (\n    <MainContext.Provider value={value}>\n      <div className='App full-height'>\n        <TopBar />\n        <LeftBar />\n        <MainView />\n      </div>\n    </MainContext.Provider >\n  )\n}\n\nexport default App\n","export function getParams(location) {\n  const searchParams = new URLSearchParams(location)\n  const m = {}\n  for (const [k, v] of searchParams.entries()) {\n    m[k] = v\n  }\n  return m\n}\n\nexport const DEFAULT_MAPS_URL = 'mindmaps.txt'\n\nexport function errorMaps(url, error) {\n  const escapedUrl = url.replaceAll('/', '\\\\/')\n  return `> Unable to get/${escapedUrl}\n   Failed to download mindmap\n> Exception/${error}\n   Javascript exception`\n}\n","import { ReportHandler } from 'web-vitals'\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './bootstrap/index.css'\nimport App from './App'\nimport reportWebVitals from './bootstrap/reportWebVitals'\n\nconsole.clear()\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\nreportWebVitals()\n"],"sourceRoot":""}